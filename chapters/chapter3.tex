%-*-coding: utf-8-*-
\chapter{Сравнение с другими точными решениями}
\section{Модификация n-grid для точного решения}

В работе \cite{NGRID} была предложена структура данных n-grid, позволяющая
эффективно решать задачу поиска ближайшего отрезка. Автором этой работы
было предложено несколько алгоритмов фильтрации не ближайших отрезков из
ячеек сети. Но предложенные алгоритмы или осуществляют очень грубую
фильтрацию, оставляя при этом много лишних отрезков и не ухудшая точность
поиска ближайшего отрезка, или переходят к примерному решению задачи
поиска ближайшего отрезка, отфильтровывая возможно ближайшие отрезки.
Для этой структуры данных мной была применена та же схема
фильтрации, что и в квадродереве. После этого незначительного измения
данная структура данных позволила решать задачу поиска ближайшего отрезка
точно и оптимально, в смысле количества отрезков, которое нужно
рассматривать перебором

\section{Сравнительные испытания}

В сравнении будут участвовать:
\begin{itemize}
\item SVD (реализация из библиотеки CGAL);
\item модифицированный n-grid (модифицированная мною, реализация, используемая в компании
Транзас);
\item квадродерево (моя реализация).
\end{itemize}
Все испытания проводились на случайно генерируемых данных. Для
генерации данных бралась прямоугольная область пространства, в которой из
случайной точки этой области начинала генерироваться случайная цепь.
Случайная цепь характеризуется максимальной и минимальной длинами шага,
а также максимальным и минимальным углами поворота. При выходе цепи за
пределы области начинается генерация новой цепи. В результате получается
нечто, напоминающее картографические данные.

Для определения скорости поиска ближайшего отрезка производятся десять
тысяч случайных запросов.

В табл. \ref{query_time}, \ref{preproc_time}, \ref{mem_usage}, \ref{max_mem_usage}
приведены усредненные результаты сравнительных испытаний.

\begin{fasttable}{%
Скорость поиска ближайшего отрезка в миллисекундах
}{query_time}{
|r|r|r|r|
}
\hline
Алгоритм количество отрезков & 100 & 1000 & 10000 \\
\hline
n-grid   & 0,002725 & 0,002325 & 0,00198 \\
SVD      & 0,049175 & 0,047175 & 0,07255 \\
quadtree & 0,002375 & 0,002375 & 0,00195 \\
\hline
\end{fasttable}

\begin{fasttable}{%
Время препроцессирования в секундах
}{preproc_time}{
|r|r|r|r|
}
\hline
Алгоритм количество отрезков & 100 & 1000 & 10000 \\
\hline
n-grid   & 6,6535 & 87,5088 & 2256,4220 \\
SVD      & 0,0115 &  0,2425 &    5,2418 \\
quadtree & 1,6375 & 26,6068 &  488,0683 \\
\hline
\end{fasttable}

\begin{fasttable}{%
Количество памяти, занимаемой структурой, в мегабайтах
}{mem_usage}{
|r|r|r|r|
}
\hline
Алгоритм количество отрезков & 100 & 1000 & 10000 \\
\hline
n-grid   & 1,2233 &  2,0783 &   9,4328 \\
SVD      & 0,2200 &  1,0590 &   5,9438 \\
quadtree & 2,0423 & 12,5915 & 265,6437 \\
\hline
\end{fasttable}

\begin{fasttable}{%
Максимальное количество памяти, потребляемое при построении в мегабайтах
}{max_mem_usage}{
|r|r|r|r|
}
\hline
Алгоритм количество отрезков & 100 & 1000 & 10000 \\
\hline
n-grid   & 1,6870 &  8,7105 & 175,3023 \\
SVD      & 0,2200 &  1,0590 &   5,9438 \\
quadtree & 2,0423 & 12,5915 & 265,6437 \\
\hline
\end{fasttable}

Из результатов сравнения заметно, что многоуровневая сеть и
квадродерево работают на порядок быстрее, чем SVD. Время, затрачиваемое на
препроцессинг, и потребление памяти больше, но это цена за скорость работы.
Хоть квадродерево и потребляет больше памяти, чем многоуровневая сеть, но
при неравномерном распределении вершин диаграммы Вороного на плоскости
оно дает существенно лучшую скорость поиска ближайшего отрезка.
В таблице 5 приведены усредненные характеристики квадродеревьев,
полученных при испытаниях.
Характеристика\\количество отрезков
Количество ячеек
Среднее число отрезков в ячейке
Максимальная глубина
100
44
9,3
4
1000
596
12,5
7,25
Таблица 5 Усредненные характеристики квадродерева
